<script type="text/x-iobroker" data-template-name="linkeddevices">
	<div class="row">
		<div class="col s2 colEnabled">
			<input type="checkbox" data-field="enabled" data-default="false"/>
			<!-- this field is mandatory, just to find out if to include this settings or not</span-->
			<span class="translate">enabled</span>
		</div>
		
		<div class="col s2 colIsLinked">
			<input type="checkbox" id="isLinked" disabled="true"/>
			<span class="translate">is linked</span>
		</div>

		<div class="col s4 rowParentObj_Input">
			<div class="row rowLinkedId">
				<input type="text" data-field="linkedId" size="30">
				<span class="translate">id of linked object</span>
			</div>
			<div class="row rowName">
				<input type="text" data-field="name" size="30">
				<span class="translate">name of linked object</span>
			</div>
		</div>

		<div class="col s4 rowLinkedObj_Infos">
			<input type="text" id="parentId" size="30" readonly>
			<span class="translate">linked with</span>
		</div>		


		<!-- <div class="input-field col s4 group-factor">
			<input data-field="groupFactor" type="number" data-default="1" step=0.001 min=0.001 max=100/>
			<label class="translate" for="groupFactor" >Counter factor</label>
			<p class="translate">Conversion factor for consumption counter</p>

		</div> -->
	</div>
</script>

<script type="text/javascript">
	$.get("adapter/linkeddevices/words.js", function (script) {
		let translation = script.substring(script.indexOf('{'), script.length);
		translation = translation.substring(0, translation.lastIndexOf(';'));
		$.extend(systemDictionary, JSON.parse(translation));
	});

	// There are two ways how to predefine default settings:
	// - with attribute "data-default" (content independent)
	// - with function in global variable "defaults". Function name is equal with adapter name.
	//   as input function receives object with all information concerning it
	if (typeof defaults !== 'undefined') {
		defaults.linkeddevices = function (obj, instanceObj) {
			return {
				enabled: false
			};
		}
	}

	if (typeof customPostInits !== 'undefined') {
		customPostInits.linkeddevices = function ($div, values, obj, type, role) {

			// $div.find('input[data-field="test"]').val(values["isLinked"])
			// $div.find('input[data-field="enabled"]').hide();

			console.info("Hallo");

			if (values["isLinked"] != undefined) {
				$div.find('.colEnabled').hide();
				$div.find('.rowParentObj_Input').hide();

				$div.find('.colIsLinked').show();
				$div.find('input[id="isLinked"]').prop('checked', values["isLinked"]);

				$div.find('.rowLinkedObj_Infos').show();
				$div.find('input[id="parentId"]').val(values["parentId"]);

			} else {
				$div.find('.colEnabled').show();
				$div.find('.rowParentObj_Input').show();

				$div.find('.colIsLinked').hide();
				$div.find('.rowLinkedObj_Infos').hide();
			}


			// $div.find('input[data-field="groupFactor"]').prop("disabled", true);
			// //$div.find('input[data-field="test"]').val(values);

			// var isLinked = $div.find('input[data-field="isLinked"]').is(":checked");
			// $div.find('input[data-field="test"]').val(JSON.stringify(values))

			// if ($div.find('input[data-field="isLinked"]').is(":checked"))
			// {
			// 	$div.find('input[data-field="name"]').hide();
			// }

			// $div.find('textarea[id="area"]').val(parentId);
		}
	}

	if (typeof customPostOnSave !== 'undefined') {
		customPostOnSave.linkeddevices = function ($div, instance) {

			return _('Please enter ID');
			// if (!$div.find('input[data-field="test"]').val() === "") {
			// 	return _('Please enter ID');
			// }
		};
	}


</script>